<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<div class="widgets">
	<div class="col-md-12" ng-controller="custRelMntCtrl">
				<div ba-panel ba-panel-class="with-scroll">
					<form class="form-horizontal" name="modifyForm" novalidate>
						<div class="row">
							<div class="col-md-2">
								<label class="grid-title">客户关系列表</label>
							</div>
                            <div class="add-row-editable-table" style="float: right;margin-right:15px;">
                                <button class="btn btn-primary btn-with-icon" ng-click="search()"><i class="ion-search"></i>查询</button>
                                <button class="btn btn-primary btn-with-icon" ng-click="clearCustRelationSearch()"><i class="ion-refresh"></i>重置</button>
                                <button class="btn btn-primary btn-with-icon" ng-click="addCustRelation()"><i class="ion-plus-round"></i>新增</button>
                            </div>
                            <div class="col-sm-2 " style="float: right">
		                  	<ui-select ng-model="searchRelObj.relationTyp" class="btn-group bootstrap-select form-control" search-enabled="false" id="relationTyp" >
							    <ui-select-match placeholder = "客户关系" >
							        <span> {{$select.selected.label}}</span>
							    </ui-select-match>
							    <ui-select-choices repeat="item in relList">
							        <span ng-bind-html="item.label"></span>
							    </ui-select-choices>
							</ui-select>
                            </div>
                            <div class="col-sm-2 zcustrelmnt_right">
                                <input type="text" class="form-control" ng-model="searchRelObj.custNo" placeholder="客户号">
                            </div>
                            <div class="col-sm-2 zcustrelmnt_right">
                                <input type="text" class="form-control" ng-model="searchRelObj.custNam" placeholder="客户名称">
                            </div>
                       </div>
					</form>
					<table class="table  table-hover table-condensed" st-table="custRel"
						   st-safe-src="custRelCollection" style="width:100%; ">
						<thead>
						<tr class="sortable black-muted-bg">
							<th >客户号</th>
							<th >客户姓名</th>
							<th >关联客户号</th>
							<th >关联客户姓名</th>
							<th >关系类型</th>
							<th >关系描述</th>
							<th >操作</th>
						</tr>
						</thead>
						<tbody>
							<tr  ng-repeat="item in custRel">
								<td style="text-align:left;">
									<nobr>{{item.custNo}}</nobr>
								</td>
								<td style="text-align:left;">
									<nobr>{{item.custNam}}</nobr>
								</td>
								<td style="text-align:left;">
									<nobr>{{item.refCustNo}}</nobr>
								</td>
								<td>
									<nobr>{{item.refCustNam}}</nobr>
								</td>
								<td>
									<nobr>{{item.relationTypNam}}</nobr>
								</td>
								<td title="{{item.relationDesc}}">
									<dev class="nowap-ellipsis relationDesc">{{item.relationDesc}}</dev>
								</td>
								<td>
									<div class="buttons" ng-show="!rowform.$visible">
										<button title="编辑" class="btn btn-primary btn-icon" ng-click="getCustRelation(item.custNo, item.relationTyp, item.refCustNo)"><i class="ion-compose"></i></button>
										<button title="删除" class="btn btn-danger btn-icon" ng-click="delCustRelation(item.custNo, item.relationTyp, item.refCustNo)"><i class="ion-trash-a"></i></button>
										<button title="关系图谱" class="btn btn-primary btn-icon" ng-click="viewRelGraph(item.custNo)"><i class="ion-asterisk"></i></button>
									</div>
								</td>
							</tr>
						</tbody>
						<tfoot>
						<tr>
							<td colspan="12">
								<div class="row">
									<st-pager opts="queryOptions"></st-pager>
								</div>
							</td>
						</tr>
						</tfoot>
					</table>
				</div>

	</div>
</div>
